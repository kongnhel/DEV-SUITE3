<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Study Buddy 2026 | Wisdom Neural</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@300;400;700&family=Space+Grotesk:wght@300;500;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
      :root {
        --primary: #6366f1;
        --bg: #030712;
      }
      body {
        font-family: "Kantumruy Pro", sans-serif;
        background-color: var(--bg);
        color: #e2e8f0;
        overflow-x: hidden;
      }

      /* Navbar Glassmorphism */
      .nav-glass {
        background: rgba(15, 23, 42, 0.9);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(99, 102, 241, 0.1);
      }
      .nav-link {
        position: relative;
        color: #94a3b8;
        transition: all 0.3s ease;
      }
      .nav-link.active {
        color: var(--primary);
      }

      /* Neural Star Background */
      #neural-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0.3;
      }

      .study-card {
        background: rgba(15, 23, 42, 0.5);
        backdrop-filter: blur(16px);
        border: 1px solid rgba(99, 102, 241, 0.1);
        border-radius: 24px;
      }
      @media (min-width: 768px) {
        .study-card { border-radius: 32px; }
      }

      .big-input {
        background: rgba(0, 0, 0, 0.3) !important;
        border: 1px solid rgba(255, 255, 255, 0.05) !important;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .big-input:focus {
        border-color: var(--primary) !important;
        box-shadow: 0 0 25px rgba(99, 102, 241, 0.15);
      }

      .shimmer-text {
        background: linear-gradient(90deg, #fff, var(--primary), #fff);
        background-size: 200% auto;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: shine 4s linear infinite;
      }
      @keyframes shine { to { background-position: 200% center; } }

      .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
  </head>
  <body class="min-h-screen">
    <canvas id="neural-bg"></canvas>

    <nav class="sticky top-0 z-[100] nav-glass px-4 py-3 md:px-6 md:py-4">
      <div class="max-w-7xl mx-auto flex justify-between items-center">
        <div class="flex items-center gap-2 cursor-pointer" onclick="window.location.href = '/'">
          <div class="h-9 w-9 md:h-10 md:w-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg">
            <span class="text-black font-black text-lg md:text-xl italic">AI</span>
          </div>
          <h1 class="text-lg md:text-xl font-black tracking-tighter shimmer-text">DEV SUITE</h1>
        </div>

        <div class="flex items-center gap-2">
          <div class="h-2 w-2 rounded-full bg-indigo-500 animate-pulse"></div>
          <span class="text-[8px] md:text-[9px] text-indigo-400 font-mono">BRAIN_LINK: ACTIVE</span>
        </div>
      </div>
      
      <div class="flex md:hidden gap-5 mt-3 overflow-x-auto no-scrollbar pb-1 text-[10px] font-bold uppercase tracking-widest">
        <a href="/" class="text-slate-400">Reviewer</a>
        <a href="/culture" class="text-slate-400">Culture</a>
        <a href="/visualizer" class="text-slate-400">Visualizer</a>
        <a href="/study-buddy" class="text-indigo-400 border-b border-indigo-400">Study Buddy</a>
        <a href="/kida" class="text-slate-400">K-IDA</a>
      </div>

      <div class="hidden md:flex justify-center gap-10 text-[10px] font-bold uppercase tracking-[0.2em] mt-[-20px]">
        <a href="/" class="nav-link">Reviewer</a>
        <a href="/culture" class="nav-link">Culture</a>
        <a href="/visualizer" class="nav-link">Visualizer</a>
        <a href="/study-buddy" class="nav-link active">Study Buddy</a>
        <a href="/kida" class="nav-link">K-IDA</a>
      </div>
    </nav>

    <main class="max-w-7xl mx-auto p-4 md:p-10">
      <header class="text-center mb-10 md:mb-16">
        <h2 class="text-4xl md:text-8xl font-black tracking-tighter shimmer-text italic uppercase">
          Study Buddy
        </h2>
        <p class="mt-2 text-slate-500 font-mono tracking-[0.3em] md:tracking-[0.5em] text-[8px] md:text-[10px] uppercase">
          Neural Learning & Research Assistant
        </p>
      </header>

      <div class="grid grid-cols-1 xl:grid-cols-12 gap-6 md:gap-10">
        <div class="xl:col-span-6 space-y-6 md:space-y-8">
          <div class="study-card p-6 md:p-10">
            <div class="flex items-center gap-3 mb-6 md:mb-8">
              <span class="text-xl md:text-2xl">ğŸ“š</span>
              <h3 class="text-xs md:text-sm font-black text-slate-400 uppercase tracking-widest">
                á”á‰áŸ’á…á¼á›á˜áŸášáŸ€á“ášá”áŸáŸ‹á¢áŸ’á“á€
              </h3>
            </div>

            <textarea
              id="studyContent"
              class="w-full big-input rounded-2xl md:rounded-3xl p-5 md:p-8 h-64 md:h-[500px] outline-none text-sm md:text-lg text-slate-200 resize-none"
              placeholder="á”á·á‘á¢ááŸ’áá”á‘á˜áŸášáŸ€á“ á¬á…áŸ†ááŸáŸ‡áŠá¹á„áŠáŸ‚á›á”áŸ’á¢á¼á“á…á„áŸ‹á±áŸ’á™á”á„ AI áŸá„áŸ’ááŸá”á±áŸ’á™..."
            ></textarea>

            <button
              onclick="processStudy()"
              id="btnAction"
              class="w-full mt-6 md:mt-8 py-4 md:py-6 rounded-2xl md:rounded-3xl font-black text-base md:text-lg text-white bg-indigo-600 hover:bg-indigo-500 active:scale-95 transition-all shadow-lg uppercase tracking-widest flex justify-center items-center gap-3"
            >
              <span>á…á¶á”áŸ‹á•áŸ’áŠá¾á˜ášáŸ€á“á¥á¡á¼áœá“áŸáŸ‡</span>
              <svg class="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" stroke-width="2" />
              </svg>
            </button>
          </div>
        </div>

        <div class="xl:col-span-6">
          <div id="loading" class="hidden study-card p-20 md:p-40 flex flex-col items-center justify-center">
            <div class="relative w-16 h-16 md:w-24 md:h-24 mb-6">
              <div class="absolute inset-0 border-2 border-indigo-500/20 rounded-full"></div>
              <div class="absolute inset-0 border-2 border-t-indigo-500 rounded-full animate-spin"></div>
            </div>
            <p class="text-indigo-400 font-mono text-[8px] md:text-[10px] tracking-widest animate-pulse uppercase">
              Downloading_Knowledge...
            </p>
          </div>

          <div id="resultArea" class="hidden space-y-6 md:space-y-8 animate-in slide-in-from-bottom-5 duration-500">
            <div class="study-card p-6 md:p-10 border-l-4 md:border-l-8 border-indigo-500">
              <h4 class="text-indigo-400 font-bold uppercase tracking-widest text-[8px] md:text-[10px] mb-4 md:mb-6 flex items-center gap-2">
                <span>ğŸ“œ</span> áŸáŸá…á€áŸ’áŠá¸áŸá„áŸ’ááŸá”á˜áŸášáŸ€á“
              </h4>
              <div id="summaryText" class="text-slate-200 leading-[1.6] md:leading-[1.8] text-base md:text-xl font-light"></div>
            </div>

            <div class="study-card p-6 md:p-10">
              <h4 class="text-yellow-400 font-bold uppercase tracking-widest text-[8px] md:text-[10px] mb-6 md:mb-8 flex items-center gap-2">
                <span>ğŸ“</span> Brain Test (áŸáŸ’á‘á„áŸ‹á€á˜áŸ’ášá·áá™á›áŸ‹áŠá¹á„)
              </h4>
              <div id="quizContainer" class="space-y-4 md:space-y-6"></div>
            </div>

            <div class="text-center p-6 md:p-8 bg-indigo-500/5 rounded-3xl border border-indigo-500/10 italic">
              <p id="motivationText" class="text-indigo-300 text-sm md:text-lg font-medium"></p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="mt-10 md:mt-20 py-10 border-t border-white/5 text-center text-slate-600 text-[8px] md:text-[10px] tracking-widest uppercase">
        &copy; 2026 AI DevSuite - Neural Knowledge Sync
    </footer>

    <script>
      const socket = io();

      function processStudy() {
        const content = document.getElementById("studyContent").value.trim();
        if (!content)
          return Swal.fire({
            icon: "info",
            title: "á—áŸ’á›áŸá…áŠá¶á€áŸ‹á˜áŸášáŸ€á“!",
            text: "áŠá¶á€áŸ‹á˜áŸášáŸ€á“á±áŸ’á™á”á„á˜á¾á›áŸá·á“á”áŸ’á¢á¼á“ á€á»áŸ†á…á„áŸ‹ášáŸ€á“á€á¶ááŸ‹!",
            background: "#030712",
            color: "#6366f1",
            confirmButtonColor: "#6366f1"
          });

        document.getElementById("loading").classList.remove("hidden");
        document.getElementById("resultArea").classList.add("hidden");
        document.getElementById("btnAction").disabled = true;
        document.getElementById("btnAction").style.opacity = "0.3";

        socket.emit("study_assist", { content });
      }

      socket.on("study_result", (res) => {
        document.getElementById("loading").classList.add("hidden");
        document.getElementById("resultArea").classList.remove("hidden");
        document.getElementById("btnAction").disabled = false;
        document.getElementById("btnAction").style.opacity = "1";

        typeWriter("summaryText", res.summary);
        document.getElementById("motivationText").innerText = "ğŸ’¬ " + res.funny_motivation;

        const container = document.getElementById("quizContainer");
        container.innerHTML = "";
        res.quiz.forEach((q, idx) => {
          const card = document.createElement("div");
          card.className = "p-5 md:p-6 bg-white/5 rounded-2xl border border-white/5 hover:border-indigo-500/30 transition-all";
          card.innerHTML = `
            <p class="font-bold text-slate-100 mb-4 text-sm md:text-lg"><span class="text-indigo-500">Q${idx + 1}:</span> ${q.question}</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              ${q.options.map(opt => `
                <button class="text-left p-3 rounded-xl bg-black/40 border border-white/5 hover:bg-indigo-500 hover:text-black transition-all text-xs md:text-sm font-medium">
                  ${opt}
                </button>
              `).join("")}
            </div>
          `;
          container.appendChild(card);
        });
      });

      function typeWriter(id, text) {
        let i = 0;
        const el = document.getElementById(id);
        el.innerHTML = "";
        function type() {
          if (i < text.length) {
            el.innerHTML += text.charAt(i);
            i++;
            setTimeout(type, 15);
          }
        }
        type();
      }

      // Performance-optimized Background
      const canvas = document.getElementById("neural-bg");
      const ctx = canvas.getContext("2d");
      let dots = [];
      function init() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        dots = [];
        const count = window.innerWidth < 768 ? 35 : 70;
        for (let i = 0; i < count; i++)
          dots.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            vx: (Math.random() - 0.5) * 0.3,
            vy: (Math.random() - 0.5) * 0.3,
          });
      }
      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#6366f1";
        ctx.strokeStyle = "rgba(99,102,241,0.05)";
        dots.forEach((d) => {
          d.x += d.vx; d.y += d.vy;
          if (d.x < 0 || d.x > canvas.width) d.vx *= -1;
          if (d.y < 0 || d.y > canvas.height) d.vy *= -1;
          ctx.beginPath();
          ctx.arc(d.x, d.y, 1, 0, Math.PI * 2);
          ctx.fill();
          dots.forEach((d2) => {
            let dist = Math.hypot(d.x - d2.x, d.y - d2.y);
            if (dist < 150) {
              ctx.beginPath();
              ctx.moveTo(d.x, d.y); ctx.lineTo(d2.x, d2.y);
              ctx.stroke();
            }
          });
        });
        requestAnimationFrame(draw);
      }
      window.addEventListener("resize", init);
      init(); draw();
    </script>
  </body>
</html>