<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Khmer Culture 2026 | Royal Cyber Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Freehand&family=Kantumruy+Pro:wght@300;400;700&family=Space+Grotesk:wght@300;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
      :root {
        --royal-gold: #d4af37;
        --deep-bronze: #8b4513;
      }
      body {
        font-family: "Kantumruy Pro", sans-serif;
        background: #0a0a0a;
        color: #f3f4f6;
        overflow-x: hidden;
      }

      /* Animated Royal Background */
      .bg-royal {
        position: fixed;
        inset: 0;
        background: radial-gradient(
          circle at 50% 50%,
          #1a1a1a 0%,
          #050505 100%
        );
        z-index: -2;
      }
      .bg-pattern {
        position: fixed;
        inset: 0;
        background-image: url("https://www.transparenttextures.com/patterns/pinstriped-suit.png");
        opacity: 0.05;
        z-index: -1;
      }

      .gold-glow-card {
        background: rgba(20, 20, 20, 0.8);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(212, 175, 55, 0.2);
        border-radius: 20px; /* Reduced for mobile */
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }
      @media (min-width: 768px) {
        .gold-glow-card {
          border-radius: 30px;
        }
      }

      .btn-khmer {
        background: linear-gradient(
          135deg,
          #b8860b 0%,
          #ffd700 50%,
          #b8860b 100%
        );
        background-size: 200% auto;
        color: #000;
        font-weight: 800;
        transition: 0.5s;
      }
      .btn-khmer:hover {
        background-position: right center;
        transform: translateY(-2px);
        box-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
      }

      .title-khmer {
        font-family: "Freehand", cursive;
        background: linear-gradient(to bottom, #ffd700, #b8860b);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .cursor::after {
        content: "|";
        animation: blink 0.7s infinite;
      }
      @keyframes blink {
        50% {
          opacity: 0;
        }
      }

      select option {
        background: #1a1a1a;
        color: #ffd700;
      }

      /* Custom scrollbar for better UX */
      ::-webkit-scrollbar {
        width: 5px;
      }
      ::-webkit-scrollbar-track {
        background: #0a0a0a;
      }
      ::-webkit-scrollbar-thumb {
        background: #d4af37;
        border-radius: 10px;
      }
    </style>
  </head>

  <body>
    <div class="bg-royal"></div>
    <div class="bg-pattern"></div>

    <nav
      class="sticky top-0 z-50 border-b border-white/5 bg-black/60 backdrop-blur-xl px-4 py-3 md:px-6 md:py-4"
    >
      <div class="max-w-7xl mx-auto flex justify-between items-center">
        <h1
          class="text-lg md:text-2xl font-black tracking-tighter text-yellow-500"
        >
          AI DEV SUITE
        </h1>

        <div class="flex items-center gap-2">
          <span class="text-[8px] md:text-[10px] font-mono text-yellow-600"
            >NODE_STATUS: ACTIVE</span
          >
          <div class="h-2 w-2 rounded-full bg-yellow-500 animate-pulse"></div>
        </div>
      </div>
      <div
        class="flex md:hidden gap-5 mt-3 overflow-x-auto pb-1 text-[10px] font-bold uppercase tracking-widest no-scrollbar"
      >
        <a href="/" class="text-slate-400 whitespace-nowrap">Reviewer</a>
        <a
          href="/culture"
          class="text-yellow-500 border-b border-yellow-500 whitespace-nowrap"
          >Culture</a
        >
        <a href="/visualizer" class="text-slate-400 whitespace-nowrap"
          >Visualizer</a
        >
        <a href="/study-buddy" class="text-slate-400 whitespace-nowrap"
          >Study Buddy</a
        >
        <a href="/kida" class="text-slate-400 whitespace-nowrap"
          >K-IDA</a>
      </div>
      <div
        class="hidden md:flex justify-center gap-10 text-xs font-bold uppercase tracking-widest mt-[-20px]"
      >
        <a href="/" class="text-slate-400 hover:text-yellow-500 transition"
          >Reviewer</a
        >
        <a href="/culture" class="text-yellow-500 border-b border-yellow-500"
          >Culture</a
        >
        <a
          href="/visualizer"
          class="text-slate-400 hover:text-yellow-500 transition"
          >Visualizer</a
        >
        <a
          href="/study-buddy"
          class="text-slate-400 hover:text-yellow-500 transition"
          >Study Buddy</a
        >
        <a href="/kida" class="text-slate-400 hover:text-yellow-500 transition"
          >K-IDA</a>
      </div>
    </nav>

    <main class="max-w-5xl mx-auto p-4 md:p-12">
      <header class="text-center mb-10 md:mb-16 relative">
        <div
          class="absolute -top-10 left-1/2 -translate-x-1/2 w-48 h-48 md:w-64 md:h-64 bg-yellow-600/10 blur-[80px] md:blur-[100px] -z-10"
        ></div>
        <h2 class="text-4xl md:text-7xl font-bold mb-4 title-khmer">
          á˜á‚áŸ’á‚á»á‘áŸ’á‘áŸáŸá€áŸáœá”áŸ’á”á’á˜áŸŒááŸ’á˜áŸ‚áš
        </h2>
        <p
          class="text-slate-400 font-light tracking-[0.15em] md:tracking-[0.2em] uppercase text-[10px] md:text-sm px-4"
        >
          Empowering Heritage with AI Neural Intelligence
        </p>
      </header>

      <div class="grid grid-cols-1 gap-6 md:gap-10">
        <div class="gold-glow-card p-6 md:p-12">
          <div class="flex items-center gap-3 md:gap-4 mb-6">
            <div
              class="bg-yellow-500/10 p-2 md:p-3 rounded-full border border-yellow-500/20"
            >
              <svg
                width="20"
                height="20"
                class="md:w-6 md:h-6"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#d4af37"
                stroke-width="2"
              >
                <path d="M12 21l-8-4V7l8-4 8 4v10l-8 4z" />
              </svg>
            </div>
            <h3 class="text-lg md:text-xl font-bold text-yellow-200 uppercase">
              áŸá¶á€áŸá½ášá…áŸ†ááŸáŸ‡áŠá¹á„
            </h3>
          </div>

          <textarea
            id="questionInput"
            class="w-full h-32 md:h-40 bg-black/40 border border-white/10 rounded-xl md:rounded-2xl p-4 md:p-6 focus:ring-2 focus:ring-yellow-500/50 outline-none text-base md:text-xl leading-relaxed text-slate-200 transition-all placeholder:text-slate-600 mb-6"
            placeholder="á§á‘á¶á ášááŸáŸ– áá¾á”áŸ’ášá¶áŸá¶á‘á¢á„áŸ’á‚ášáœááŸ’áááŸ’ášá¼áœá”á¶á“á€áŸá¶á„á¡á¾á„á€áŸ’á“á»á„á‚áŸ„á›á”áŸ†áá„á¢áŸ’áœá¸?"
          ></textarea>

          <div
            class="flex flex-col md:flex-row items-center justify-between gap-6"
          >
            <div class="w-full md:w-1/2">
              <label
                class="block text-[10px] font-bold text-yellow-600 uppercase tracking-widest mb-2 ml-2"
                >á”áŸ’ášá—áŸá‘á…á˜áŸ’á›á¾á™ (Type)</label
              >
              <select
                id="answerType"
                class="w-full bg-black/60 border border-yellow-500/20 rounded-full px-5 py-3 text-sm md:text-base text-yellow-200 outline-none focus:border-yellow-500 transition appearance-none"
              >
                <option value="brief">áŸá„áŸ’ááŸá”ááŸ’á›á¸ ááŸ’á›á¹á˜ (Brief)</option>
                <option value="detailed">á–á“áŸ’á™á›áŸ‹á›á˜áŸ’á¢á·á (Detailed)</option>
              </select>
            </div>

            <button
              onclick="askAI()"
              id="btnAsk"
              class="btn-khmer px-8 md:px-12 py-4 rounded-full text-base md:text-lg shadow-2xl active:scale-95 flex items-center gap-3 w-full md:w-auto justify-center"
            >
              <span>áŸá¶á€áŸá½ášá¢áŸ’á“á€á‡áŸ†á“á¶á‰</span>
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="3"
              >
                <path d="M5 12h14m-7-7l7 7-7 7" />
              </svg>
            </button>
          </div>
        </div>

        <div id="loading" class="hidden py-10 md:py-20 text-center">
          <div class="inline-block relative">
            <div
              class="w-16 h-16 md:w-20 md:h-20 border-4 border-yellow-500/20 border-t-yellow-500 rounded-full animate-spin"
            ></div>
            <div
              class="absolute inset-0 flex items-center justify-center text-xl md:text-2xl"
            >
              ğŸ“œ
            </div>
          </div>
          <p
            class="mt-6 text-yellow-500 text-xs md:text-sm font-bold animate-pulse tracking-widest uppercase"
          >
            á€áŸ†á–á»á„á”á¾á€á€áŸ’ášá¶áŸ†á„áŸáŸ’ášá¶áœá‡áŸ’ášá¶áœ...
          </p>
        </div>

        <div
          id="responseSection"
          class="hidden space-y-6 animate-in slide-in-from-bottom-10 duration-700"
        >
          <div
            class="gold-glow-card p-6 md:p-10 border-l-[8px] md:border-l-[12px] border-yellow-600"
          >
            <div
              class="flex items-center justify-between mb-6 border-b border-white/5 pb-4"
            >
              <span
                id="responseBadge"
                class="text-[9px] md:text-xs font-black tracking-[0.2em] md:tracking-[0.3em] text-yellow-600 uppercase"
                >ARCHIVE_RECORD</span
              >
              <button
                onclick="window.print()"
                class="text-[9px] font-bold text-slate-500 hover:text-white transition uppercase"
              >
                SAVE_OFFLINE
              </button>
            </div>

            <div class="flex gap-4 md:gap-6">
              <div
                class="hidden sm:block text-2xl md:text-4xl opacity-50 text-yellow-500 leading-none"
              >
                â€œ
              </div>
              <p
                id="responseText"
                class="text-slate-100 leading-[1.6] md:leading-[1.8] text-base md:text-xl font-light"
              ></p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer
      class="mt-10 md:mt-20 py-10 border-t border-white/5 text-center text-slate-600 text-[8px] md:text-[10px] tracking-widest uppercase px-6"
    >
      &copy; 2026 AI DevSuite Cambodia - Inspired by Angkor Wat
    </footer>

    <script>
      const socket = io();

      function askAI() {
        const question = document.getElementById("questionInput").value;
        const type = document.getElementById("answerType").value;

        if (!question)
          return Swal.fire({
            icon: "warning",
            title: "áŸá¼á˜áœá¶á™áŸáŸ†áá½áš!",
            text: "á”á„ AI á˜á·á“á¢á¶á…á‘á¶á™áŠá¹á„áŸáŸ†áá½ášá€áŸ’á“á»á„á…á·ááŸ’áá”áŸ’á¢á¼á“á”á¶á“á‘áŸ!",
            background: "#0a0a0a",
            color: "#ffd700",
            confirmButtonColor: "#b8860b",
          });

        document.getElementById("loading").classList.remove("hidden");
        document.getElementById("responseSection").classList.add("hidden");
        document.getElementById("btnAsk").disabled = true;
        document.getElementById("btnAsk").style.opacity = "0.5";

        socket.emit("ask_culture", { question, type });
      }

      socket.on("culture_result", (data) => {
        document.getElementById("loading").classList.add("hidden");
        document.getElementById("responseSection").classList.remove("hidden");
        document.getElementById("btnAsk").disabled = false;
        document.getElementById("btnAsk").style.opacity = "1";

        const type = document.getElementById("answerType").value;
        document.getElementById("responseBadge").innerText =
          type === "brief" ? "BRIEF_SUMMARY" : "DETAILED_ANALYSIS";

        typeWriter("responseText", data.response);
      });

      function typeWriter(id, text) {
        let i = 0;
        const el = document.getElementById(id);
        el.innerHTML = "";
        el.classList.add("cursor");

        function type() {
          if (i < text.length) {
            el.innerHTML += text.charAt(i);
            i++;
            setTimeout(type, 15);
          } else {
            el.classList.remove("cursor");
          }
        }
        type();
      }

      socket.on("error_occured", (msg) => {
        Swal.fire({
          icon: "error",
          title: "á”á‰áŸ’á á¶á”áŸ’ášá–áŸá“áŸ’á’",
          text: msg,
          background: "#0a0a0a",
          color: "#fff",
        });
        document.getElementById("loading").classList.add("hidden");
        document.getElementById("btnAsk").disabled = false;
        document.getElementById("btnAsk").style.opacity = "1";
      });
    </script>
  </body>
</html>
